{"version":15,"variables":[{"key":"Tags","type":"query","visible":true,"input":"fetch events\n| fieldsKeep entity_tags\n| expand  entity_tags\n| filter contains(entity_tags, \"Environment:\") or contains(entity_tags, \"Location:\") or contains(entity_tags, \"Provider:\")\n//| parse entity_tags, \"\"\"LD ':' LD:value\"\"\"\n//| fieldsRemove entity_tags\n//| sort value asc\n| summarize Environment = collectDistinct(entity_tags)","multiple":true},{"key":"Status","type":"csv","visible":false,"input":"ALL,OPEN,CLOSED","multiple":false},{"key":"Severity","type":"csv","visible":false,"input":"ALL,MONITORING UNAVAILABLE,AVAILABILITY,ERROR,SLOWDOWN,RESOURCE_CONTENTION,CUSTOM","multiple":false}],"tiles":{"1":{"type":"data","title":"Problem list","query":"fetch dt.davis.problems\n// Lookup for affected_entity_ids and root_cause_entity_id Start\n| filter matchesValue(entity_tags, $Tags)\n| expand affected_entity_ids\n| expand root_cause_entity_id\n| lookup [fetch dt.entity.service], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.services\"\n| lookup [fetch dt.entity.service], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.services\"\n| lookup [fetch dt.entity.process_group_instance], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.pgi\"\n| lookup [fetch dt.entity.process_group_instance], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.pgi\"\n| lookup [fetch dt.entity.application], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.applications\"\n| lookup [fetch dt.entity.application], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.applications\"\n| lookup [fetch dt.entity.mobile_application], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.mobile\"\n| lookup [fetch dt.entity.mobile_application], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.mobile\"\n| lookup [fetch dt.entity.custom_application], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.customapplication\"\n| lookup [fetch dt.entity.custom_application], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.customapplication\"\n| lookup [fetch dt.entity.cloud_application], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.cloudapplication\"\n| lookup [fetch dt.entity.cloud_application], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.cloudapplication\"\n| lookup [fetch dt.entity.synthetic_test], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.synthetictest\"\n| lookup [fetch dt.entity.synthetic_test], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.synthetictest\"\n| lookup [fetch dt.entity.http_check], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.httpcheck\"\n| lookup [fetch dt.entity.http_check], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.httpcheck\"\n| lookup [fetch dt.entity.kubernetes_cluster], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.kubernetescluster\"\n| lookup [fetch dt.entity.kubernetes_cluster], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.kubernetescluster\"\n| lookup [fetch dt.entity.host], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.hosts\"\n| lookup [fetch dt.entity.host], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.hosts\"\n| lookup [fetch dt.entity.custom_device], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.customdevices\"\n| lookup [fetch dt.entity.custom_device], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.customdevices\"\n| lookup [fetch dt.entity.hypervisor], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.hypervisor\"\n| lookup [fetch dt.entity.hypervisor], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.hypervisor\"\n| lookup [fetch dt.entity.environment], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.environment\"\n// Lookup for affected_entity_ids and root_cause_entity_id End\n\n// Summarzation Start - Group Probem Events by Problem ID\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            affectedServices = collectDistinct(lookup.affected.entity.servicesentity.name),\n            affectedPGI = collectDistinct(lookup.affected.entity.pgientity.name),\n            affectedApplications = collectDistinct(lookup.affected.entity.applicationsentity.name),\n            affectedMobile = collectDistinct(lookup.affected.entity.mobileentity.name),\n            affectedCustomApplication = collectDistinct(lookup.affected.entity.customapplicationentity.name),\n            affectedCloudApplication = collectDistinct(lookup.affected.entity.cloudapplicationentity.name),\n            affectedSyntheticTest = collectDistinct(lookup.affected.entity.synthetictestentity.name),\n            affectedHttpCheck = collectDistinct(lookup.affected.entity.httpcheckentity.name),\n            affectedKubernetesCluster = collectDistinct(lookup.affected.entity.kubernetesclusterentity.name),\n            affectedHosts = collectDistinct(lookup.affected.entity.hostsentity.name),\n            affectedCustomDevices = collectDistinct(lookup.affected.entity.customdevicesentity.name),\n            affectedHypervisor = collectDistinct(lookup.affected.entity.hypervisorentity.name),\n            affectedEnvironment = collectDistinct(lookup.affected.entity.environmententity.name),\n            rootCauseServices = collectDistinct(lookup.rootcause.entity.servicesentity.name),\n            rootCausePGI = collectDistinct(lookup.rootcause.entity.pgientity.name),\n            rootCauseApplications = collectDistinct(lookup.rootcause.entity.applicationsentity.name),\n            rootCauseMobile = collectDistinct(lookup.rootcause.entity.mobileentity.name),\n            rootCauseCustomApplication = collectDistinct(lookup.rootcause.entity.customapplicationentity.name),\n            rootCauseSyntheticTest = collectDistinct(lookup.rootcause.entity.synthetictestentity.name),\n            rootCauseHttpCheck = collectDistinct(lookup.rootcause.entity.httpcheckentity.name),\n            rootCauseHosts = collectDistinct(lookup.rootcause.entity.hostsentity.name),\n            rootCauseCustomDevices = collectDistinct(lookup.rootcause.entity.customdevicesentity.name),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n| fieldsAdd currentTime = toTimestamp(now())\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n// Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n\n//| filter in(\"ALL\",$Status) OR in($Status, severityLevel)\n//| filter in(\"ALL\",$Severity) OR in($Severity, severityLevel)\n// Dashboard Fitlers End\n\n// Final Result Start\n| fields Status = if((status == \"OPEN\"),\"ðŸ”´ OPEN\", \n                  else:if((status == \"CLOSED\"),\"ðŸŸ¢ CLOSED\")),\n         Problem = concat(display_id,\" - \",event.name),         \n         Severity = severityLevel,\n         Type = (event.name),\n         AffectedCount = arraySize(arrayRemoveNulls(arrayConcat(affectedApplications,affectedMobile,affectedCustomApplication,affectedCloudApplication,affectedSyntheticTest,affectedHttpCheck,affectedServices,affectedPGI,affectedKubernetesCluster,affectedHosts,affectedHypervisor,affectedCustomDevices,affectedEnvironment))),\n         Affected = arrayRemoveNulls(arrayConcat(affectedApplications,affectedMobile,affectedCustomApplication,affectedCloudApplication,affectedSyntheticTest,affectedHttpCheck,affectedServices,affectedPGI,affectedKubernetesCluster,affectedHosts,affectedHypervisor,affectedCustomDevices,affectedEnvironment)),\n         RootCause = arrayRemoveNulls(arrayConcat(rootCauseServices,rootCauseHosts)),\n         StartTime = startTime,\n         EndTime =  if((status == \"OPEN\"),\"In Progress\", \n                    else:if((status == \"CLOSED\"),endTime)),   \n      //   Duration = if((status == \"CLOSED\"),problemClosedDuration,\n      //              else:if((status == \"OPEN\"), currentTime-startTime)),\n\n         `Duration (min)` = if((status == \"CLOSED\"),problemClosedDuration/60000000000,\n                   else:if((status == \"OPEN\"), toLong(currentTime-startTime)/60000000000)),\n      \n         \n         event.id           \n| sort StartTime, direction:\"descending\"\n| sort Status, direction:\"ascending\"\n// Final Result End","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoricalBarChartSettings":{"categoryAxis":"Status","categoryAxisLabel":"Status","valueAxis":"AffectedCount","valueAxisLabel":"AffectedCount"},"fieldMapping":{"timestamp":"StartTime","leftAxisValues":["AffectedCount"],"leftAxisDimensions":["Status"]},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"Status"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[["AffectedCount"],["Type"],["Severity"]],"lineWrapIds":[["Affected"]],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"AffectedCount"},"displayedFields":["Status"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"AffectedCount","rangeAxis":""},{"valueAxis":"Duration (min)","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"3":{"type":"data","title":"Number of concurrently active problems over time","query":"fetch dt.davis.problems\n| filter matchesValue(entity_tags, $Tags)\n| makeTimeseries count = count(), spread: timeframe(from: event.start, to: coalesce(event.end, now())), by:{event.status}, interval:5m\n| sort event.status desc","visualization":"barChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":""},"categoricalBarChartSettings":{"categoryAxis":"event.status","categoryAxisLabel":"event.status","valueAxis":"interval","valueAxisLabel":"interval","layout":"horizontal","scale":"absolute"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain","seriesOverrides":[{"seriesId":["ACTIVE"],"override":{"color":{"Default":"var(--dt-colors-charts-loglevel-emergency-default, #ae132d)"}}},{"seriesId":["CLOSED"],"override":{"color":{"Default":"var(--dt-colors-charts-logstatus-none-default, #2c2f3f)"}}},{"seriesId":["OPEN"],"override":{"color":{"Default":"var(--dt-colors-charts-vulnerability-risk-level-critical-default, #970c0c)","Hover":"var(--dt-colors-charts-vulnerability-risk-level-critical-hover, #750b0b)","Active":"var(--dt-colors-charts-vulnerability-risk-level-critical-active, #4b0707)","DefaultTransparent":"var(--dt-colors-charts-vulnerability-risk-level-critical-default-transparent, #591300cc)","HoverTransparent":"var(--dt-colors-charts-vulnerability-risk-level-critical-hover-transparent, #000c)","ActiveTransparent":"var(--dt-colors-charts-vulnerability-risk-level-critical-active-transparent, #000c)"}}}],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["count"],"leftAxisDimensions":["event.status"]},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"status"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["affected"]],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"interval"},"displayedFields":["event.status"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"unitsOverrides":[{"identifier":null,"unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1717671507313}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"4":{"type":"data","title":"Total","query":"fetch dt.davis.problems\n// First Summarzation Start - Group Probem Events by Problem ID\n| filter matchesValue(entity_tags, $Tags)\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n//| filter (\"ALL\" == $Status OR $Status == status) \n//| filter in(\"ALL\",$Severity) OR in($Severity, severityLevel)\n\n// Second Summarzation Start - Sumamrize Total Problem Count\n| summarize Total = count()\n// Second Summarzation End - Summarize Total Problem Count","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":""},"categoricalBarChartSettings":{"categoryAxisLabel":"","valueAxisLabel":"Total","layout":"horizontal","scale":"absolute"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain"},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":false,"alignment":"center","sparklineSettings":{"isVisible":false},"recordField":"Total"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":[null],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"5":{"type":"data","title":"Closed","query":"fetch dt.davis.problems\n\n// First Summarzation Start - Group Probem Events by Problem ID\n| filter matchesValue(entity_tags, $Tags)\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n//| filter in(\"ALL\",$Severity) OR in($Severity, severityLevel)\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize Open Problems Count\n| summarize Total = countIf(status == \"CLOSED\")\n// Second Summarzation End - Summarize Open Problems Count\n","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":""},"categoricalBarChartSettings":{"categoryAxisLabel":"","valueAxisLabel":"Total","layout":"horizontal","scale":"absolute"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain"},"singleValue":{"showLabel":false,"label":"","prefixIcon":"CheckCircleIcon","autoscale":false,"alignment":"center","recordField":"Total"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":[null],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"6":{"type":"data","title":"Open","query":"fetch dt.davis.problems\n\n// First Summarzation Start - Group Probem Events by Problem ID\n| filter matchesValue(entity_tags, $Tags)\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n//| filter in(\"ALL\",$Severity) OR in($Severity, severityLevel)\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize Open Problems Count\n| summarize Total = countIf(status == \"ACTIVE\")\n// Second Summarzation End - Summarize Open Problems Count\n","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":""},"categoricalBarChartSettings":{"categoryAxisLabel":"","valueAxisLabel":"Total","layout":"horizontal","scale":"absolute"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain"},"singleValue":{"showLabel":false,"label":"","prefixIcon":"ErrorIcon","autoscale":false,"alignment":"center","recordField":"Total"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":[null],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"7":{"type":"data","title":"Closed MTTR (Minutes) ","query":"fetch dt.davis.problems\n// First Summarzation Start - Group Probem Events by Problem ID\n| filter matchesValue(entity_tags, $Tags)\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n//| filter in(\"ALL\",$Severity) OR in($Severity, severityLevel)\n//| filter status  == \"CLOSED\"\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize Closed Problems MTTR\n| summarize  `ClosedProblemsMTTR` = avg(toDouble(problemClosedDuration))/60000000000\n// Second Summarzation End - Summarize Closed Problems MTTR","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":""},"categoricalBarChartSettings":{"categoryAxisLabel":"","valueAxisLabel":"Total","layout":"horizontal","scale":"absolute"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain"},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","sparklineSettings":{"isVisible":false},"recordField":"ClosedProblemsMTTR"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"ClosedProblemsMTTR"},"displayedFields":[null],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"ClosedProblemsMTTR","rangeAxis":""}]},"unitsOverrides":[{"identifier":"ClosedProblemsMTTR","unitCategory":"time","baseUnit":"minute","displayUnit":"minute","decimals":2,"suffix":"","delimiter":false,"added":1725465177107}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"11":{"type":"data","title":"Top Problem affected Topology","query":"fetch dt.davis.problems\n| filter matchesValue(entity_tags, $Tags)\n| expand affected_entity_ids\n| filterOut affected_entity_ids == \"ENVIRONMENT-0000000000000001\"\n| summarize count=count(), by:{affected_entity_ids}","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"affected_entity_ids","categoryAxisLabel":"affected_entity_ids","valueAxis":"count","valueAxisLabel":"count"},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"affected_entity_ids","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"bottom"},"colorMode":"color-palette","colorPalette":"red","dataMappings":{"value":"count"},"displayedFields":["affected_entity_ids"]},"histogram":{"dataMappings":[{"valueAxis":"count","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"12":{"type":"data","title":"Largest Problem Blast Radius (number of affected entities)","query":"fetch dt.davis.problems\n| filter matchesValue(entity_tags, $Tags)\n| fieldsAdd countAffected = arraySize(affected_entity_ids)\n| filterOut affected_entity_ids == \"ENVIRONMENT-0000000000000001\"","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"event.name","categoryAxisLabel":"event.name","valueAxis":"countAffected","valueAxisLabel":"countAffected"},"fieldMapping":{"timestamp":"timestamp","leftAxisValues":["countAffected"],"leftAxisDimensions":["display_id"]},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"affected_entity_ids","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"bottom"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"countAffected"},"displayedFields":["display_id"]},"histogram":{"dataMappings":[{"valueAxis":"countAffected","rangeAxis":""},{"valueAxis":"resolved_problem_duration","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"13":{"type":"data","title":"Closed problem MTTR (Minutes) by severity level","query":"fetch dt.davis.problems\n// First Summarzation Start - Group Probem Events by Problem ID\n| filter matchesValue(entity_tags, $Tags)\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false and status == \"CLOSED\"\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n//| filter in(\"ALL\",$Status) OR in($Status, severityLevel)\n//| filter in(\"ALL\",$Severity) OR in($Severity, severityLevel)\n\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize Closed Problems MTTR by Severity Level\n| summarize  ClosedProblemsMTTR = avg(toDouble(problemClosedDuration))/60000000000, by:{severityLevel}\n| sort ClosedProblemsMTTR, direction:\"descending\"\n// Second Summarzation End - Summarize Closed Problems MTTR by Severity Level","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":""},"categoricalBarChartSettings":{"categoryAxis":"severityLevel","categoryAxisLabel":"severityLevel","valueAxis":"ClosedProblemsMTTR","valueAxisLabel":"ClosedProblemsMTTR","layout":"horizontal","scale":"absolute","categoryAxisTickLayout":"horizontal","colorPaletteMode":"single-color"},"legend":{"hidden":true},"colorPalette":"categorical"},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","sparklineSettings":{"isVisible":false},"recordField":"severityLevel"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"ClosedProblemsMTTR"},"displayedFields":["severityLevel"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"ClosedProblemsMTTR","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"14":{"type":"data","title":"Count by severity level","query":"fetch dt.davis.problems\n// First Summarzation Start - Group Probem Events by Problem ID\n| filter matchesValue(entity_tags, $Tags)\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n//| filter in(\"ALL\",$Status) OR in($Status, severityLevel)\n//| filter in(\"ALL\",$Severity) OR in($Severity, severityLevel)\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize by Severity Level\n| summarize Total = count(), by:{Severity = severityLevel}\n| sort Total, direction:\"descending\"\n// Second Summarzation End - Summarize by Severity Level","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoricalBarChartSettings":{"categoryAxis":"Severity","categoryAxisLabel":"Severity","valueAxis":"Total","valueAxisLabel":"Total","layout":"horizontal","colorPaletteMode":"single-color"},"legend":{"hidden":true},"colorPalette":"purple-rain"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"Severity"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":["Severity"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"15":{"type":"data","title":"Count by name","query":"fetch dt.davis.problems\n\n// First Summarzation Start - Group Probem Events by Problem Type\n| filter matchesValue(entity_tags, $Tags)\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n// Summarzation End - Group Probem Events by Problem Type\n\n// Dashboard Fitlers Start\n//| filter in(\"ALL\",$Status) OR in($Status, severityLevel)\n//| filter in(\"ALL\",$Severity) OR in($Severity, severityLevel)\n\n// Dashboard Fitlers End\n\n\n// Second Summarzation Start - Summarize by Problem Type\n| summarize Total = count(), by:{Type = event.name}\n| sort Total, direction:\"descending\"\n// Second Summarzation Start - Summarize by Problem Type\n\n","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":"","groupingThresholdValue":null},"categoricalBarChartSettings":{"categoryAxis":"Type","categoryAxisLabel":"Type","valueAxis":"Total","valueAxisLabel":"Total","layout":"horizontal","scale":"absolute","colorPaletteMode":"single-color"},"legend":{"hidden":true},"colorPalette":"blue-steel"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"Type"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":["Type"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}}},"layouts":{"1":{"x":0,"y":17,"w":24,"h":9},"3":{"x":6,"y":0,"w":18,"h":4},"4":{"x":0,"y":0,"w":3,"h":2},"5":{"x":3,"y":2,"w":3,"h":2},"6":{"x":0,"y":2,"w":3,"h":2},"7":{"x":3,"y":0,"w":3,"h":2},"11":{"x":0,"y":4,"w":12,"h":6},"12":{"x":12,"y":4,"w":12,"h":6},"13":{"x":0,"y":10,"w":8,"h":7},"14":{"x":8,"y":10,"w":8,"h":7},"15":{"x":16,"y":10,"w":8,"h":7}},"importedWithCode":false,"settings":{"defaultTimeframe":{"value":{"from":"now()-7d","to":"now()"},"enabled":true}}}